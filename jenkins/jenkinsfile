pipeline {

    environment {
        AWS_ACCESS_KEY_ID   = credentials('AWS_ACCESS_KEY_ID')
        AWS_SECRET_ACCESS_KEY   = credentials('AWS_ACCESS_SECRET_KEY_ID')
    }

    agent any

    stages {

        stage('Checkout') 

        {

            steps {

                checkout([$class: 'GitSCM', branches: [[name: '*/development']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/saholo21/DevOps_homework.git']]])

            }

        }

        stage ('terraform init') {

            steps {
                sh ('ls')
                sh ('pwd')
                sh ('cd terraform')
                sh ('terraform init')

            }

        }

        stage ("terraform Action") {

            steps {

                echo "Terraform action is –> ${action}"

                sh ('terraform ${action} –auto-approve')

            }

        }

    }

}
